<Window x:Class="Typing.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:Typing.ViewModels"
        mc:Ignorable="d"
        Title="Тест на скорость набора текста" MinWidth="900" MinHeight="315" Height="450" Width="800" Background="#add5ff">
    <Window.DataContext>
        <vm:MainVM/>
    </Window.DataContext>

    <ScrollViewer ScrollViewer.VerticalScrollBarVisibility="Auto">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="1.5*"/>
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <Border CornerRadius="15" Background="White" BorderThickness="1" Width="250" VerticalAlignment="Top"
                Margin="0 30 0 0" BorderBrush="#FFABADB3" Visibility="{Binding IsActive}">
                <StackPanel>
                    <Border CornerRadius="15 15 0 0" Background="#5e91b3" VerticalAlignment="Top" Height="20">
                        <TextBlock Text="Результат" FontSize="15" Margin=" 10 0 0 0" Foreground="White" FontWeight="DemiBold"/>
                    </Border>
                    <Border>
                        <StackPanel>
                            <TextBlock Text="{Binding StringFormat={}{0} СВМ, Path=Result.WPM}" HorizontalAlignment="Center" FontSize="40" FontWeight="DemiBold" Foreground="green"/>
                            <TextBlock Text="(слов в минуту)" FontSize="15" Foreground="Gray" Margin="0 -5 0 5" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                    <Border BorderThickness="0 1 0 0" BorderBrush="Gray">
                        <DockPanel Margin="5 5 5 5">
                            <TextBlock Text="Нажатий"/>
                            <TextBlock Text="{Binding Result.Chars}" FontWeight="DemiBold" HorizontalAlignment="Right"/>
                        </DockPanel>
                    </Border>
                    <Border BorderThickness="0 1 0 0" BorderBrush="Gray">
                        <DockPanel Margin="5 5 5 5">
                            <TextBlock Text="Аккуратность"/>
                            <TextBlock Text="{Binding StringFormat={}{0}%, Path=Result.Accuracy}" FontWeight="DemiBold" HorizontalAlignment="Right"/>
                        </DockPanel>
                    </Border>
                    <Border BorderThickness="0 1 0 0" BorderBrush="Gray">
                        <DockPanel Margin="5 5 5 5">
                            <TextBlock Text="Верные слова"/>
                            <TextBlock Text="{Binding Result.CorrectWords}" Foreground="Green" FontWeight="DemiBold" HorizontalAlignment="Right"/>
                        </DockPanel>
                    </Border>
                    <Border BorderThickness="0 1 0 0" BorderBrush="Gray">
                        <DockPanel Margin="5 5 5 5">
                            <TextBlock Text="Неверные слова"/>
                            <TextBlock Text="{Binding Result.WrongWords}" Foreground="Red" FontWeight="DemiBold" HorizontalAlignment="Right"/>
                        </DockPanel>
                    </Border>
                </StackPanel>
            </Border>

            <StackPanel Grid.Column="1">
                <Border Background="White" BorderThickness="1" BorderBrush="#FFABADB3" CornerRadius="20" Margin="0 30 0 0">
                    <ListView ItemsSource="{Binding Words}" Background="Transparent" BorderThickness="0" 
                          ScrollViewer.HorizontalScrollBarVisibility="Disabled" 
                          ScrollViewer.VerticalScrollBarVisibility="Disabled" Margin="0 5 0 5">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Border Background="{Binding Color}" CornerRadius="5">
                                    <TextBlock Text="{Binding Word}" Padding="3 0 3 3"/>
                                </Border>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel/>
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                    </ListView>
                </Border>

                <Border Background="#a7c8e7" CornerRadius="10" Margin="0 10 0 0">
                    <Grid Margin="30 5 30 5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="auto"/>
                            <ColumnDefinition Width="auto"/>
                        </Grid.ColumnDefinitions>
                        <Border Background="White" CornerRadius="10">
                            <TextBox Text="{Binding InputText, UpdateSourceTrigger=PropertyChanged}"/>
                        </Border>
                        <Border Grid.Column="1" Background="#3c4d5c" CornerRadius="10" Margin="5 0 0 0">
                            <TextBlock Text="{Binding CurrentTime}" Foreground="White" Width="50" TextAlignment="Center" HorizontalAlignment="Right"/>
                        </Border>
                        <Border Grid.Column="2" Background="#428bca" CornerRadius="5" Margin="5 0 0 0">
                            <Button Content="🔄️" Foreground="White" Padding="2 0 2 3" Command="{Binding RestartCommand}" HorizontalAlignment="Right" Cursor="Hand"/>
                        </Border>
                    </Grid>
                </Border>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>
